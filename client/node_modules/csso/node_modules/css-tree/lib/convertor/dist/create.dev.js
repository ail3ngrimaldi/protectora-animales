"use strict";

var List = require('../common/List');

module.exports = function createConvertors(walk) {
  return {
    fromPlainObject: function fromPlainObject(ast) {
      walk(ast, {
        enter: function enter(node) {
          if (node.children && node.children instanceof List === false) {
            node.children = new List().fromArray(node.children);
          }
        }
      });
      return ast;
    },
    toPlainObject: function toPlainObject(ast) {
      walk(ast, {
        leave: function leave(node) {
          if (node.children && node.children instanceof List) {
            node.children = node.children.toArray();
          }
        }
      });
      return ast;
    }
  };
};