"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

function batchedSingleLineTests(options) {
  // eslint counts lines from 1
  var lineOffset = options.code.startsWith('\n') ? 2 : 1;
  var output = 'output' in options && options.output ? options.output.trim().split('\n') : null;
  return options.code.trim().split('\n').map(function (code, i) {
    var lineNum = i + lineOffset;
    var errors = 'errors' in options ? options.errors.filter(function (e) {
      return e.line === lineNum;
    }) : [];
    var returnVal = Object.assign(Object.assign({}, options), {
      code: code,
      errors: errors.map(function (e) {
        return Object.assign(Object.assign({}, e), {
          line: 1
        });
      })
    });

    if (output === null || output === void 0 ? void 0 : output[i]) {
      return Object.assign(Object.assign({}, returnVal), {
        output: output[i]
      });
    }

    return returnVal;
  });
}

exports.batchedSingleLineTests = batchedSingleLineTests;