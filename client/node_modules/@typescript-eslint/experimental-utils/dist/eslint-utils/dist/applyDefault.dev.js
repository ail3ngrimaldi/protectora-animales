"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var deepMerge_1 = require("./deepMerge");
/**
 * Pure function - doesn't mutate either parameter!
 * Uses the default options and overrides with the options provided by the user
 * @param defaultOptions the defaults
 * @param userOptions the user opts
 * @returns the options with defaults
 */


function applyDefault(defaultOptions, userOptions) {
  // clone defaults
  var options = JSON.parse(JSON.stringify(defaultOptions));

  if (userOptions === null || userOptions === undefined) {
    return options;
  }

  options.forEach(function (opt, i) {
    if (userOptions[i] !== undefined) {
      var userOpt = userOptions[i];

      if (deepMerge_1.isObjectNotArray(userOpt) && deepMerge_1.isObjectNotArray(opt)) {
        options[i] = deepMerge_1.deepMerge(opt, userOpt);
      } else {
        options[i] = userOpt;
      }
    }
  });
  return options;
}

exports.applyDefault = applyDefault;