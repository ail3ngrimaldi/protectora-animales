'use strict';

var restoreCursor = require('restore-cursor');

var isHidden = false;

exports.show = function () {
  var writableStream = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : process.stderr;

  if (!writableStream.isTTY) {
    return;
  }

  isHidden = false;
  writableStream.write("\x1B[?25h");
};

exports.hide = function () {
  var writableStream = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : process.stderr;

  if (!writableStream.isTTY) {
    return;
  }

  restoreCursor();
  isHidden = true;
  writableStream.write("\x1B[?25l");
};

exports.toggle = function (force, writableStream) {
  if (force !== undefined) {
    isHidden = force;
  }

  if (isHidden) {
    exports.show(writableStream);
  } else {
    exports.hide(writableStream);
  }
};